{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<style>
    body {
        margin: 0; /* Remove default margin */
        padding: 0; /* Remove default padding */
    }
    .sidebar {
        width: 250px;
        height: 100vh;
        background-color: #78b1f3;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 20px;
        box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.356);
        position: fixed;
        top: 55px; /* Adjust based on navbar height */
        left: 0;
        z-index: 99; /* Ensure sidebar is behind navbar */
        margin-top: 0; /* Remove any top margin */
    }
    .sidebar button {
        font-size: 1.1rem;
        border: none;
        outline: none;
        padding: 10px;
        margin-bottom: 10px;
        background-color: #78b1f3;
        border-radius: 7px;
        color: rgb(255, 255, 255);
        display: flex;
        align-items: center;
        width: 100%;
        text-align: left;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
        font-family: 'Open Sans', sans-serif; 
    }
    .sidebar button i {
        margin-left: 10px;
        width: 20px; /* Adjust icon width as needed */
    }
    .sidebar button:hover {
        background-color: #3870b1;
        color: white;
    }
    .content {
        margin-left: 250px; /* Adjust based on sidebar width */
        padding: 20px;
        margin-top: 55px; /* Same as navbar height */
    }
    .alert {
        position: fixed;
        top: 50px;
        right: 0;
        width: calc(100% - 250px); /* Adjust based on sidebar width */
        z-index: 100;
    }
    .logout-button {
        width: 100%;
        text-align: center;
        margin-top: auto; /* Pushes the logout button to the bottom */ 
        margin-bottom: 35px; /* Add some space after the logout button */
    }
    .form-group {
        width: 100%;
      }
      .d-none {
        display: none;
    }
</style>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3">
            <div class="sidebar">
                <button id="student-info-btn" class="btn btn-primary btn-block mb-3">Student Info <i class="fa fa-user"></i></button>
                <button id="announcements-btn" class="btn btn-primary btn-block mb-3">Announcements <i class="fa fa-bell"></i></button>
                <button id="curriculum-btn" class="btn btn-primary btn-block mb-3">Curriculum <i class="fa fa-book"></i></button>

                <!-- logout button at the bottom of the sidebar -->
               <div class="logout-button">
                    {% if current_user.is_authenticated %}
                        <form action="{{ url_for('auth.logout') }}" method="post">
                           <button type="submit" class="btn btn-danger">Log Out
                                <i class="fa fa-sign-out"></i>
                           </button>
                        </form>
                     {% endif %}
                </div>
            </div>
        </div>

        <!-- Main content area -->
        <div class="col-md-9">
            <div id="alerts">
                {% with messages = get_flashed_messages(with_categories=True) %}
                    {% if messages %}
                        <div class="alert-container">
                            {% for category, message in messages %}
                                <div class="alert alert-{{ category }}">
                                    {{ message }}
                                    <button type="button" class="close" data-dismiss="alert">
                                        <span aria-hidden="true">&times;</span>
                                      </button>
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}
            </div>

            <div id="student-info-form">
                <h2>Student Information Form</h2>
                <form method="post" action="{{ url_for('views.admin_dashboard') }}">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" class="form-control" placeholder="Enter Student's Email" required>
                    </div>
                    <div class="form-group">
                        <label for="student_name">Student's Name</label>
                        <input type="text" id="student_name" name="student_name" class="form-control" placeholder="Enter Student's Full Name" required>
                    </div>
                    <div class="form-group">
                        <label for="date_of_birth">Date of Birth</label>
                        <input type="text" id="date_of_birth" name="date_of_birth" class="form-control" placeholder="YYYY-MM-DD" required>
                    </div>
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender" class="form-control" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="nationality">Nationality</label>
                        <input type="text" id="nationality" name="nationality" class="form-control" placeholder="Enter Nationality" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" id="address" name="address" class="form-control" placeholder="Enter Address" required>
                    </div>
                    <div class="form-group">
                        <label for="parent_guardian_name">Parent/Guardian's Full Name</label>
                        <input type="text" id="parent_guardian_name" name="parent_guardian_name" class="form-control" placeholder="Enter Parent/Guardian's Full Name" required>
                    </div>
                    <div class="form-group">
                        <label for="email_gp">Parent/Guardian's Email</label>
                        <input type="email" id="email_gp" name="email_gp" class="form-control" placeholder="Enter Parent/Guardian's Email" required>
                    </div>
                    <div class="form-group">
                        <label for="relationship_to_student">Relationship to Student</label>
                        <input type="text" id="relationship_to_student" name="relationship_to_student" class="form-control" placeholder="Enter Relationship to Student" required>
                    </div>
                    <div class="form-group">
                        <label for="contact_number">Parent/Guardian's Contact Number</label>
                        <input type="text" id="contact_number" name="contact_number" class="form-control" placeholder="Enter guardian's contact number" required>
                    </div>
                    <div class="form-group">
                        <label for="emergency_contact_name">Emergency Contact's Full Name</label>
                        <input type="text" id="emergency_contact_name" name="emergency_contact_name" class="form-control" placeholder="Enter Emergency Contact's Name" required>
                    </div>
                    <div class="form-group">
                        <label for="emergency_relationship">Relationship to Student</label>
                        <input type="text" id="emergency_relationship" name="emergency_relationship" class="form-control" placeholder="Enter Relationship to Student" required>
                    </div>
                    <div class="form-group">
                        <label for="emergency_contact_number">Emergency Contact's Number</label>
                        <input type="text" id="emergency_contact_number" name="emergency_contact_number" class="form-control" placeholder="Enter Emergency Contact's Number" required>
                    </div>

                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>

            <!-- Curriculum Creation Form -->
    <div id="curriculum-form" class="d-none">
        <h2>Create Curriculum</h2>
        <!-- Form to Create Curriculum -->
<form method="post" action="{{ url_for('views.create_curriculum') }}">
    <div class="form-group">
        <label for="grade_id">Grade</label>
        <select id="grade_id" name="grade_id" class="form-control" required>
            <option value="" disabled selected hidden>Grade</option>
            <option value="1">Preschool</option>  <!-- Replace with actual IDs from your DB -->
            <option value="2">Pre-K</option>
            <option value="3">Kinder</option>
        </select>
    </div>
    <div class="form-group">
        <label for="schedule_id">Schedule</label>
        <select id="schedule_id" name="schedule_id" class="form-control" required>
            <option value="" disabled selected hidden>Schedule</option>
            <option value="1">Morning</option>  <!-- Replace with actual IDs from your DB -->
            <option value="2">Afternoon</option>
        </select>
    </div>
            <div class="form-group">
                <label for="subjects">Subjects</label>
                <input type="text" id="subjects" name="subjects" class="form-control" placeholder="Enter Subjects" required>
            </div>
            <div class="form-group">
                <label for="teacher">Teacher</label>
                <input type="text" id="teacher" name="teacher" class="form-control" placeholder="Enter Teacher's Name" required>
            </div>
            <button type="submit" class="btn btn-primary">Create Curriculum</button>
        </form>
    </div>
</div>

           
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const studentInfoBtn = document.getElementById('student-info-btn');
        const curriculumBtn = document.getElementById('curriculum-btn');
        const studentInfoForm = document.getElementById('student-info-form');
        const curriculumForm = document.getElementById('curriculum-form');

        // Function to show and hide elements
        function toggleElement(element, show) {
            if (element) {
                element.classList.toggle('d-none', !show);
            }
        }

        // Initial setup to hide all forms
        toggleElement(studentInfoForm, false);
        toggleElement(curriculumForm, false);

        // Event listener for student info button
        if (studentInfoBtn) {
            studentInfoBtn.addEventListener('click', function(event) {
                event.preventDefault();
                toggleElement(studentInfoForm, true);
                toggleElement(curriculumForm, false);
            });
        }

        // Event listener for curriculum button
        if (curriculumBtn) {
            curriculumBtn.addEventListener('click', function(event) {
                event.preventDefault();
                toggleElement(curriculumForm, true);
                toggleElement(studentInfoForm, false);
            });
        }
    });
</script>


{% endblock %}
